// たとえて降水確率：例えデータ定義ファイル
//
// このファイルでは、降水確率を人間向けに表現するための
// さまざまな例え文や統計ネタを定義します。index.html の
// スクリプトより前に読み込むことで、グローバル変数として
// `FACTS`, `FACT_POOL`, `randomFact`, `metaphorDB` を提供します。

// 統計ネタ（まじめ用）
window.FACTS = {
  ENGLISH_PCT: 18.8,
  MOBILE_OWN_PCT: 82
};

// まじめモードで使用する統計ネタの関数群
window.FACT_POOL = [
  () => `英語を話す人が世界の約${window.FACTS.ENGLISH_PCT}%と言われるくらいの確率。少数派だけど、当たる日は当たります。`,
  () => `世界の約${window.FACTS.ENGLISH_PCT}%程度が英語を話す推計に近い水準。『起きる可能性が現実的にある』ゾーンです。`,
  () => `携帯電話を持っている人が世界で約${window.FACTS.MOBILE_OWN_PCT}%と言われるくらいの確率。かなり起こります。`,
  () => `世界で携帯を持つ人が約${window.FACTS.MOBILE_OWN_PCT}%という話に近い水準。『降る前提』で計画しましょう。`
];

// 統計ネタからランダムに1つ選んで返すヘルパー関数。
window.randomFact = function() {
  const pool = window.FACT_POOL;
  const idx = Math.floor(Math.random() * pool.length);
  return pool[idx]();
};

// 各モードごとに降水確率に対応する例え文のデータベース
window.metaphorDB = {
  // 真面目モード：ためになる統計ネタや解説を含む
  serious: [
    { min: 0,  max: 9,   texts: [
      "ほぼ降水の心配なし。運用上は『傘なし』で良い確度です。",
      "リスクは極小。外出計画は雨を無視してOKなレベルです。"
    ]},
    { min: 10, max: 29,  texts: [
      "低確率だけどゼロじゃない。保険として折りたたみ傘が合理的。",
      "小さな不確実性が残る日。予定が長いなら備えが効きます。"
    ]},
    { min: 30, max: 49,  texts: [
      () => window.randomFact(),
      () => window.randomFact()
    ]},
    { min: 50, max: 69,  texts: [
      "五分五分〜やや高め。意思決定としては『傘を持つ』が優勢。",
      "外れると損が大きい確率帯。傘携行が期待値的に得です。"
    ]},
    { min: 70, max: 89,  texts: [
      () => window.randomFact(),
      () => window.randomFact()
    ]},
    { min: 90, max: 100, texts: [
      "ほぼ確実。雨天として動線・荷物・服装を組むのが正解です。",
      "失敗許容が低いレベルで高確率。雨対策を標準装備に。"
    ]}
  ],

  // 雑学モード：日常会話のような軽い例え
  trivia: [
    { min: 0,  max: 9,   texts: [
      "今日はまず降らないっしょ。傘は置いてOK。",
      "ほぼ安心。空、やる気ゼロです。"
    ]},
    { min: 10, max: 29,  texts: [
      "たぶん平気。でも折りたたみあると心が強い。",
      "一応ある。『一応』が一番やっかい。"
    ]},
    { min: 30, max: 49,  texts: [
      "降るかも。外出長いなら傘を。",
      "微妙に怪しい。傘を持つか、強運を信じるか。"
    ]},
    { min: 50, max: 69,  texts: [
      "半々以上。持っとこ。あとで自分を褒められる。",
      "傘なしはギャンブル寄り。"
    ]},
    { min: 70, max: 89,  texts: [
      "けっこう降りそう。傘はレギュラー入り。",
      "雨前提で動くとストレス減ります。"
    ]},
    { min: 90, max: 100, texts: [
      "ほぼ雨。傘は必須。",
      "今日は雨確定に近い。潔く備えよう。"
    ]}
  ],

  // お笑いモード：ユーモアや比喩を交えた遊び心あふれる文
  fun: [
    { min: 0,  max: 9,   texts: [
      "砂漠でスコールに当たるくらい。",
      "傘を持ったら逆に晴れる、あれです。"
    ]},
    { min: 10, max: 29,  texts: [
      "『一滴も降らない』とは言ってない、って顔してる。",
      "折りたたみ傘を持つと…降らない法則、発動候補。"
    ]},
    { min: 30, max: 49,  texts: [
      "フルスイングでフェアウェイをキープする確率。",
      "洗濯物を外に出した瞬間、空が反抗する確率。"
    ]},
    { min: 50, max: 69,  texts: [
      "コイントス。裏が出たらびしょ濡れ。",
      "『降ったら会社のせい』が通用する確率。"
    ]},
    { min: 70, max: 89,  texts: [
      "雨という名のイベント、だいたい開催。",
      "今日は空が“水分補給”してくる日。"
    ]},
    { min: 90, max: 100, texts: [
      "世界は今日、あなたを濡らしにきています。",
      "傘？ いや、もはや装備品です。"
    ]}
  ]
};

// 従来の normal キーは trivia（雑学）モードにエイリアスする（後方互換性のため）
window.metaphorDB.normal = window.metaphorDB.trivia;
