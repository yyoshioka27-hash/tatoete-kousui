// =========================
// たとえて降水確率：例えデータ定義（確定版）
// - 0,10,20,...,100 の11段階
// - 各段階5ネタ
// - モード：雑学(NETA_TRIVIA) / お笑い(NETA)
//   ※現段階では「お笑い」も同じデータを入れてあります（データなし撲滅優先）
//     後で「お笑い専用」に差し替え可能
// =========================

(function () {

  // -------------------------
  // 0/10/.../100 に丸める
  // -------------------------
  window.bucket10 = window.bucket10 || function (p) {
    p = Math.max(0, Math.min(100, Number(p)));
    const b = Math.round(p / 10) * 10;
    return Math.max(0, Math.min(100, b));
  };

  // =========================
  // 雑学モード：確定ネタ（5つ×11）
  // =========================
  window.NETA_TRIVIA = {
    0: [
      "全人類の中で月に降り立った人の割合は0.00000009％（約0％）",
      "全人類の中でエベレスト山頂に立った人の割合は約0.0001％（約0％）",
      "全人類の中で南極点に到達した人の割合は約0.0001％（約0％）",
      "人類史の中でノーベル賞を受賞した人の割合は約0.00002％（約0％）",
      "全人類の中で国際宇宙ステーションに滞在した人の割合は約0.000003％（約0％）",
    ],

    10: [
      "左利きの人の割合（世界）は約10％（約10％）",
      "日本の大学院進学率は約11％（約10％）",
      "日本人で毎日運動する人の割合は約10％（約10％）",
      "世界人口のうち欧州に住む人の割合は約9％（約10％）",
      "日本人で海外に1年以上住んだ経験がある人は約8％（約10％）",
    ],

    20: [
      "世界で英語を使える人の割合は約20％（約20％）",
      "世界人口のうち先進国に住む人は約17％（約20％）",
      "日本人で海外渡航経験がほとんどない人は約20％（約20％）",
      "世界人口のうち砂漠地域に居住する人は約15％（約20％）",
      "世界の言語のうち話者が100万人以上いる言語は約20％（約20％）",
    ],

    30: [
      "世界人口のうち農業に従事する人は約27％（約30％）",
      "日本人で睡眠時間が8時間以上の人は約30％（約30％）",
      "人が覚えた情報が翌日まで残る割合は約30％（約30％）",
      "世界の陸地のうち乾燥地帯が占める割合は約30％（約30％）",
      "世界人口のうち30歳未満の人は約32％（約30％）",
    ],

    40: [
      "世界の国のうち内陸国の割合は約40％（約40％）",
      "大学に進学する人（世界平均）は約38％（約40％）",
      "世界人口のうちインターネット未利用者は約35％（約40％）",
      "世界の労働人口のうち第一次産業に従事する人は約40％（約40％）",
      "日本人で定期的に運動習慣がある人は約36％（約40％）",
    ],

    50: [
      "成人男性で視力1.0未満の人は約50％（約50％）",
      "日本人で1年間に本を1冊も読まない人は約47％（約50％）",
      "世界人口のうち毎日インターネットを利用する人は約54％（約50％）",
      "世界人口のうち都市部に住んでいる人は約56％（約50％）",
      "世界人口のうちスマートフォンを所有している人は約51％（約50％）",
    ],

    60: [
      "オランダ人男性で身長180cm以上の割合は約60％（約60％）",
      "世界人口のうちアジアに住む人は約59％（約60％）",
      "日本の大学進学率は約58％（約60％）",
      "人体に占める水分量は約60％（約60％）",
      "世界人口のうち2言語以上を使える人は約60％（約60％）",
    ],

    70: [
      "地球表面のうち海が占める割合は約71％（約70％）",
      "日本の国土のうち山地の割合は約73％（約70％）",
      "世界人口のうち都市近郊に住む人は約72％（約70％）",
      "世界の淡水利用のうち農業利用は約70％（約70％）",
      "日本人で「運動不足」と感じている人は約68％（約70％）",
    ],

    80: [
      "世界の識字率は約85％（約80％）",
      "世界人口のうち都市部に住む人は約80％（約80％）",
      "日本人で毎日インターネットを利用する人は約80％（約80％）",
      "世界のエネルギー消費で化石燃料が占める割合は約82％（約80％）",
      "世界人口のうち電気を利用できる人は約85％（約80％）",
    ],

    90: [
      "OECD諸国で高校教育を修了している人は約89％（約90％）",
      "世界人口のうち電力にアクセスできる人は約90％（約90％）",
      "世界人口のうち基本的な飲料水サービスにアクセスできる人は約91％（約90％）",
      "日本人で九九（9×9）を言える人は約90％（約90％）",
      "世界人口のうち何らかのメディアに接触している人は約90％（約90％）",
    ],

    100: [
      "サウジアラビアでイスラム教徒の割合は約99％（約100％）",
      "モルディブでイスラム教徒の割合は約100％（約100％）",
      "日本の義務教育就学率は約99.9％（約100％）",
      "キューバの識字率は約99.8％（約100％）",
      "エジプトで国土の大半が砂漠の割合は約96％（約100％）",
    ],
  };

  // =========================
  // お笑いモード：いったん同一データで動作保証
  // （後で NETA をお笑い専用に差し替え可能）
  // =========================
  window.NETA = window.NETA_TRIVIA;

  // 互換用（古いコードが参照しても落ちない）
  window.metaphorDB = window.metaphorDB || {};
  window.metaphorDB.trivia = Object.keys(window.NETA_TRIVIA).map((k) => {
    const v = Number(k);
    return { min: v, max: v, texts: window.NETA_TRIVIA[v] };
  });
  window.metaphorDB.fun = window.metaphorDB.trivia;
  window.metaphorDB.unified = window.metaphorDB.trivia;
  window.metaphorDB.serious = window.metaphorDB.trivia;
  window.metaphorDB.normal = window.metaphorDB.trivia;

})();
