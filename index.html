<!-- index.html -->
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#ffffff" />
  <meta name="description" content="é™æ°´ç¢ºç‡ã‚’â€œåˆ¥ã®ç¢ºç‡â€ã§ä¾‹ãˆã¦ã¿ã‚‹ã€‚é›‘å­¦/ãŠç¬‘ã„ã®2ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œã€‚PWAã§ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ OKã€‚" />
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="apple-touch-icon" href="./icons/icon-192.png" />
  <link rel="icon" type="image/png" href="./icons/icon-192.png" />

  <title>ãŸã¨ãˆã¦ã€é™æ°´ç¢ºç‡ã€‚ï¼é™æ°´ç¢ºç‡ã‚’â€œåˆ¥ã®ç¢ºç‡â€ã§ä¾‹ãˆã¦ã¿ãŸã€‚</title>

  <style>
    :root{
      --bg1:#ffffff;
      --bg2:#ffffff;
      --accent:#2563eb;
      --text:#0f172a;
      --sub:#475569;

      --card: rgba(255,255,255,0.86);
      --card-border: rgba(15, 23, 42, 0.08);
      --shadow: 0 12px 28px rgba(2,6,23,0.10);

      --radius: 18px;
      --radius2: 14px;
      --tap: 44px;
    }

    body{
      margin:0;
      padding: 18px;
      font-family: -apple-system, system-ui, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
      background: linear-gradient(180deg, var(--bg1), var(--bg2));
      color: var(--text);
    }
    .container{
      max-width: 860px;
      margin: 0 auto;
    }
    h1{
      margin: 0 0 14px;
      font-size: 26px;
      letter-spacing: -0.2px;
      line-height: 1.25;
    }
    .subtitle{
      margin-top: 6px;
      font-size: 14px;
      font-weight: 500;
      color: var(--sub);
    }

    .card{
      border-radius: var(--radius);
      padding: 16px;
      margin: 12px 0;
      background: var(--card);
      border: 1px solid var(--card-border);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
    }

    .small{
      color: var(--sub);
      font-size: 13px;
      line-height: 1.4;
    }
    .muted{ color:#64748b; font-size:12px; }

    input, select, textarea{
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,0.10);
      width: 100%;
      box-sizing: border-box;
      font-size: 16px;
      background: rgba(255,255,255,0.90);
      outline: none;
    }
    input:focus, select:focus, textarea:focus{
      border-color: rgba(37,99,235,0.55);
      box-shadow: 0 0 0 4px rgba(37,99,235,0.12);
    }

    button{
      min-height: var(--tap);
      padding: 11px 14px;
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,0.10);
      background: #fff;
      cursor: pointer;
      font-size: 16px;
      transition: transform .06s ease, box-shadow .2s ease, border-color .2s ease;
      box-shadow: 0 8px 18px rgba(2,6,23,0.06);
    }
    button:hover{
      border-color: rgba(37,99,235,0.35);
      box-shadow: 0 10px 24px rgba(2,6,23,0.10);
    }
    button:active{ transform: translateY(1px); }
    button:disabled{ opacity: .55; cursor: not-allowed; }

    .btnPrimary{
      background: var(--accent);
      border-color: rgba(37,99,235,0.55);
      color: #fff;
      box-shadow: 0 14px 28px rgba(37,99,235,0.18);
    }

    .row{
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items: center;
    }

    /* ====== ãƒ¢ãƒ¼ãƒ‰ï¼ˆé›‘å­¦/ãŠç¬‘ã„ï¼‰ä½ç½®ã‚ºãƒ¬å®Œå…¨ä¿®æ­£ ====== */
    .example-mode .modeWrap{
      display:flex;
      gap:16px;
      align-items:center;
      justify-content:flex-start;
      margin-top:10px;
    }
    .example-mode label{
      display:inline-flex;
      align-items:center;
      gap:8px;
      cursor:pointer;
      white-space:nowrap;
      font-size:16px;
    }
    .example-mode input[type="radio"]{
      margin:0;
      transform: translateY(1px);
    }

    /* ====== æœæ˜¼å¤œï¼ˆç¸¦ä¸¦ã³ãƒ»å¤§ããï¼‰ ====== */
    .slot{
      border: 1px solid rgba(15,23,42,0.08);
      border-radius: var(--radius2);
      padding: 14px;
      margin-top: 12px;
      background: rgba(255,255,255,0.72);
    }
    .slotHead{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }
    .slotLabel{
      font-size: 13px;
      color: var(--sub);
      font-weight: 700;
    }
    .slotMain{
      display:flex;
      align-items:center;
      gap:10px;
      margin-top:6px;
    }
    .wx{
      font-size: 30px;
      width: 38px;
      text-align:center;
      line-height:1;
    }
    .pop{
      font-size: 44px;
      font-weight: 900;
      letter-spacing: -1px;
      line-height: 1;
      min-width: 110px;
    }
    .metaLine{
      margin-top: 8px;
      font-size: 16px;       /* â† å°ã•ã™ãå•é¡Œã‚’è§£æ¶ˆ */
      color: #1f2937;
      line-height: 1.65;
      font-weight: 600;
    }

    .actions{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      margin-top: 12px;
    }

    .likeBtn{
      min-height: 40px;
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 15px;
      background: rgba(255,255,255,0.92);
    }
    .badge{
      margin-left:6px;
      font-size:16px;
      font-weight:800;
      color:#f59e0b;
    }

    .pill{
      display:inline-block;
      padding: 6px 10px;
      border: 1px solid rgba(15,23,42,0.10);
      border-radius: 999px;
      font-size:12px;
      margin-right: 6px;
      background: rgba(255,255,255,0.80);
    }

    /* ====== ãƒ©ãƒ³ã‚­ãƒ³ã‚° ====== */
    .rankCardTitle{
      font-size: 16px;
      font-weight: 900;
      margin: 0 0 8px;
    }
    .rankHint{
      font-size: 12px;
      color: var(--sub);
      margin: 0 0 8px;
    }

    .footer{
      margin: 18px 0 8px;
      color: var(--sub);
      font-size: 12px;
      text-align: center;
      opacity: 0.9;
    }

    @media (max-width: 600px){
      body{ padding: 12px; }
      h1{ font-size: 22px; }
      .card{ padding: 12px; }
      .row{ grid-template-columns: 1fr; }
      .pop{ font-size: 40px; min-width: 100px; }
      .metaLine{ font-size: 15px; }
    }
  </style>
</head>

<body>
  <div class="container">

    <h1>ãŸã¨ãˆã¦ã€é™æ°´ç¢ºç‡ã€‚
      <div class="subtitle">ï¼é™æ°´ç¢ºç‡ã‚’â€œåˆ¥ã®ç¢ºç‡â€ã§ä¾‹ãˆã¦ã¿ãŸã€‚</div>
    </h1>

    <!-- åœ°ç‚¹æ¤œç´¢ -->
    <div class="card">
      <div class="small">å¤©æ°—äºˆå ±ã‚’çŸ¥ã‚ŠãŸã„åœ°ç‚¹</div>
      <div class="row" style="margin-top:10px;">
        <input id="place" placeholder="ä¾‹ï¼šä»™å°å¸‚ / Sendai / ä»™å°é§… / ä»™å°å¸‚é’è‘‰åŒº" />
        <button id="search" class="btnPrimary">æ¤œç´¢</button>
      </div>

      <div style="margin-top:10px;">
        <select id="candidates" disabled>
          <option>æ¤œç´¢çµæœãŒã“ã“ã«å‡ºã¾ã™</option>
        </select>
        <div id="placeStatus" class="muted" style="margin-top:8px;">
          åœ°ç‚¹ã‚’å…¥åŠ›ã—ã¦ã€Œæ¤œç´¢ã€ã—ã¦ãã ã•ã„ï¼ˆAPIã‚­ãƒ¼ä¸è¦ï¼‰
        </div>
      </div>
    </div>

    <!-- ãƒ¢ãƒ¼ãƒ‰ -->
    <div class="card example-mode">
      <div class="small">ä¾‹ãˆãƒ¢ãƒ¼ãƒ‰</div>
      <div class="modeWrap">
        <label><input type="radio" name="mode" value="trivia" checked> é›‘å­¦</label>
        <label><input type="radio" name="mode" value="fun"> ãŠç¬‘ã„</label>
      </div>
      <div class="muted" style="margin-top:10px;">
        â€»åŒã˜ç¢ºç‡ã§ã‚‚ã€æ¯å›ã¡ãŒã†ãƒã‚¿ãŒå‡ºã¾ã™ï¼ˆğŸ‘ã§å‡ºã‚„ã™ããªã‚Šã¾ã™ï¼‰
      </div>
    </div>

    <!-- é™æ°´ç¢ºç‡ï¼ˆç¸¦ä¸¦ã³ï¼šæœâ†’æ˜¼â†’å¤œï¼‰ -->
    <div class="card">
      <div class="small">ä»Šæ—¥ã®é™æ°´ç¢ºç‡ï¼ˆæœ/æ˜¼/å¤œï¼‰</div>
      <div class="small" id="popHint">åœ°ç‚¹ã‚’é¸ã¶ã¨è‡ªå‹•å–å¾—ã—ã¾ã™</div>

      <!-- æœ -->
      <div class="slot">
        <div class="slotHead">
          <div class="slotLabel">æœï¼ˆ6â€“11æ™‚ï¼‰</div>
        </div>
        <div class="slotMain">
          <div class="wx" id="wx_m">--</div>
          <div class="pop" id="pop_m">--%</div>
        </div>
        <div class="metaLine" id="meta_m"></div>

        <div class="actions">
          <button id="del_m" style="display:none;">ã“ã®ãƒã‚¿ã‚’å‰Šé™¤</button>
          <button id="like_m" class="likeBtn">ğŸ‘ã„ã„ã­ (<span id="likeCount_m">0</span>)</button>
          <span id="badge_m" class="badge"></span>
        </div>
      </div>

      <!-- æ˜¼ -->
      <div class="slot">
        <div class="slotHead">
          <div class="slotLabel">æ˜¼ï¼ˆ12â€“17æ™‚ï¼‰</div>
        </div>
        <div class="slotMain">
          <div class="wx" id="wx_d">--</div>
          <div class="pop" id="pop_d">--%</div>
        </div>
        <div class="metaLine" id="meta_d"></div>

        <div class="actions">
          <button id="del_d" style="display:none;">ã“ã®ãƒã‚¿ã‚’å‰Šé™¤</button>
          <button id="like_d" class="likeBtn">ğŸ‘ã„ã„ã­ (<span id="likeCount_d">0</span>)</button>
          <span id="badge_d" class="badge"></span>
        </div>
      </div>

      <!-- å¤œ -->
      <div class="slot">
        <div class="slotHead">
          <div class="slotLabel">å¤œï¼ˆ18â€“23æ™‚ï¼‰</div>
        </div>
        <div class="slotMain">
          <div class="wx" id="wx_e">--</div>
          <div class="pop" id="pop_e">--%</div>
        </div>
        <div class="metaLine" id="meta_e"></div>

        <div class="actions">
          <button id="del_e" style="display:none;">ã“ã®ãƒã‚¿ã‚’å‰Šé™¤</button>
          <button id="like_e" class="likeBtn">ğŸ‘ã„ã„ã­ (<span id="likeCount_e">0</span>)</button>
          <span id="badge_e" class="badge"></span>
        </div>
      </div>

      <div style="margin-top:12px;">
        <span class="pill" id="sourceTag">API: æœªæ¥ç¶š</span>
        <span class="pill" id="tzTag">TZ: --</span>
      </div>
    </div>

    <!-- âœ… èµ¤æ ã®ç·è©•ï¼ˆäººé–“å‘ã‘ç¿»è¨³ï¼‰ãƒ–ãƒ­ãƒƒã‚¯ã¯ â€œå®Œå…¨å‰Šé™¤â€ -->

    <!-- ä¾‹ãˆã‚’å¤‰ãˆã‚‹ -->
    <div class="card">
      <div class="actions" style="justify-content:center;">
        <button id="refresh" class="btnPrimary" style="width:100%;">åŒã˜ç¢ºç‡ã§ã‚‚ä¾‹ãˆã‚’å¤‰ãˆã‚‹</button>
      </div>

      <!-- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã¯ â€œãƒœã‚¿ãƒ³ç›´ä¸‹â€ -->
      <div id="todayRankingWrap" style="margin-top:12px;"></div>
    </div>

    <!-- ãƒã‚¿è¿½åŠ  -->
    <div class="card" id="addSection">
      <div class="small"><b>ãƒã‚¿è¿½åŠ ï¼ˆæ‰¿èªå¾…ã¡ã¸é€ä¿¡ï¼‰</b></div>
      <div class="muted" style="margin-top:8px;">
        â€»é€ä¿¡ã™ã‚‹ã¨æ‰¿èªå¾…ã¡ã«å…¥ã‚Šã¾ã™ã€‚æ‰¿èªã•ã‚Œã‚‹ã¨å…¨å“¡ã«å…¬é–‹ã•ã‚Œã¾ã™ã€‚
      </div>

      <div class="actions" style="margin-top:10px;">
        <label class="small">ãƒ¢ãƒ¼ãƒ‰ï¼š</label>
        <select id="newPhraseMode" style="max-width: 220px;">
          <option value="trivia">é›‘å­¦</option>
          <option value="fun">ãŠç¬‘ã„</option>
        </select>

        <label class="small">ç¢ºç‡ï¼š</label>
        <select id="newPhraseBucket" style="max-width: 140px;">
          <option value="0">0%</option>
          <option value="10">10%</option>
          <option value="20">20%</option>
          <option value="30">30%</option>
          <option value="40">40%</option>
          <option value="50">50%</option>
          <option value="60">60%</option>
          <option value="70">70%</option>
          <option value="80">80%</option>
          <option value="90">90%</option>
          <option value="100">100%</option>
        </select>

        <button id="submitPendingBtn" class="btnPrimary">æ‰¿èªå¾…ã¡ã¸é€ä¿¡</button>
      </div>

      <!-- âœ… ãƒšãƒ³ãƒãƒ¼ãƒ  -->
      <div style="margin-top:10px;">
        <input id="penName" placeholder="ãƒšãƒ³ãƒãƒ¼ãƒ ï¼ˆä»»æ„ï¼‰" />
      </div>

      <div style="margin-top:10px;">
        <textarea id="newPhrase" rows="3" placeholder="ä¾‹ï¼šæ—¥æœ¬ã®è­˜å­—ç‡ã¯99ï¼…ï¼ˆç´„100ï¼…ï¼‰"></textarea>
      </div>

      <div class="muted" id="addStatus" style="margin-top:10px;"></div>
    </div>

    <div class="footer">
      API: Open-Meteo / PWAå¯¾å¿œï¼ˆãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ OKï¼‰
    </div>

  </div><!-- /.container -->

  <!-- âœ… é‡è¦ï¼šãƒã‚¿ï¼ˆmetaphors.jsï¼‰ã‚’å…ˆã«èª­ã‚€ -->
  <script src="metaphors.js?v=12"></script>
  <!-- âœ… script.js ã¯ãã®æ¬¡ -->
  <script defer src="script.js?v=12"></script>

  <!-- # END -->
</body>
</html>
