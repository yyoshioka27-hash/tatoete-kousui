<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#ffffff" />
  <link rel="manifest" href="./manifest.webmanifest" />

  <!-- âœ… ã‚¿ã‚¤ãƒˆãƒ«ã®ã‚«ãƒƒã‚³ä¿®æ­£ï¼ˆ[ ãŒæ··ã–ã£ã¦ãŸï¼‰ -->
  <title>ãŸã¨ãˆã¦ã€é™æ°´ç¢ºç‡ã€‚ï¼é™æ°´ç¢ºç‡ã‚’â€œåˆ¥ã®ç¢ºç‡â€ã§ä¾‹ãˆã¦ã¿ãŸã€‚</title>

  <style>
    /* =========================
       Pro UI Base
    ========================= */
    :root{
      --bg1:#ffffff;
      --bg2:#ffffff;
      --accent:#2563eb;   /* ã“ã“ãŒä¸»å½¹è‰² */
      --text:#0f172a;
      --sub:#475569;

      --card: rgba(255,255,255,0.86);
      --card-border: rgba(15, 23, 42, 0.08);
      --shadow: 0 12px 28px rgba(2,6,23,0.10);

      --radius: 18px;
      --radius2: 14px;

      --space: 18px;
      --space2: 12px;

      --tap: 44px;
    }

    /* ç”»é¢å…¨ä½“ã‚°ãƒ©ãƒ‡èƒŒæ™¯ï¼ˆâ‘¡ï¼‰ */
    body{
      margin:0;
      padding: 18px;
      font-family: -apple-system, system-ui, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
      background: linear-gradient(180deg, var(--bg1), var(--bg2));
      color: var(--text);
    }

    /* âœ… ç”»é¢ã‚’â€œã‚¢ãƒ—ãƒªã£ã½ãâ€ä¸­å¤®å¯„ã› */
    .container{
      max-width: 860px;
      margin: 0 auto;
    }

    /* è¦‹å‡ºã— */
    h1{
      margin: 0 0 14px;
      font-size: 26px;
      letter-spacing: -0.2px;
      line-height: 1.25;
    }
    .subtitle{
      margin-top: 6px;
      font-size: 14px;
      font-weight: 500;
      color: var(--sub);
    }

    /* ã‚«ãƒ¼ãƒ‰ */
    .card{
      border-radius: var(--radius);
      padding: 16px;
      margin: 12px 0;
      background: var(--card);
      border: 1px solid var(--card-border);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
    }

    /* å°è¦‹å‡ºã— */
    .small{
      color: var(--sub);
      font-size: 13px;
      line-height: 1.4;
    }

    /* æ–‡å­—ï¼ˆï¼…ã‚’ä¸»å½¹ã«ï¼‰ */
    .big{
      font-size: 52px;
      font-weight: 900;
      letter-spacing: -1px;
      line-height: 1;
    }

    /* å…¥åŠ›UI */
    input, select, textarea{
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,0.10);
      width: 100%;
      box-sizing: border-box;
      font-size: 16px;
      background: rgba(255,255,255,0.90);
      outline: none;
    }
    input:focus, select:focus, textarea:focus{
      border-color: rgba(37,99,235,0.55);
      box-shadow: 0 0 0 4px rgba(37,99,235,0.12);
    }

    /* ãƒœã‚¿ãƒ³ */
    button{
      min-height: var(--tap);
      padding: 11px 14px;
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,0.10);
      background: #fff;
      cursor: pointer;
      font-size: 16px;
      transition: transform .06s ease, box-shadow .2s ease, border-color .2s ease;
      box-shadow: 0 8px 18px rgba(2,6,23,0.06);
    }
    button:hover{
      border-color: rgba(37,99,235,0.35);
      box-shadow: 0 10px 24px rgba(2,6,23,0.10);
    }
    button:active{ transform: translateY(1px); }
    button:disabled{ opacity: .55; cursor: not-allowed; }

    /* å¼·èª¿ãƒœã‚¿ãƒ³ï¼ˆæ¤œç´¢ãƒ»æ›´æ–°ãªã©ï¼‰ */
    .btnPrimary{
      background: var(--accent);
      border-color: rgba(37,99,235,0.55);
      color: #fff;
      box-shadow: 0 14px 28px rgba(37,99,235,0.18);
    }
    .btnPrimary:hover{
      box-shadow: 0 16px 34px rgba(37,99,235,0.22);
    }

    /* Row */
    .row{
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items: center;
    }

    /* çŠ¶æ…‹è¡¨ç¤º */
    .muted{ color:#64748b; font-size:12px; }
    .ok{ color:#059669; font-size:12px; }
    .ng{ color:#dc2626; font-size:12px; }

    /* pill */
    .pill{
      display:inline-block;
      padding: 6px 10px;
      border: 1px solid rgba(15,23,42,0.10);
      border-radius: 999px;
      font-size:12px;
      margin-right: 6px;
      background: rgba(255,255,255,0.80);
    }

    /* slots */
    .slot{
      border: 1px solid rgba(15,23,42,0.08);
      border-radius: var(--radius2);
      padding: 14px;
      margin-top: 12px;
      background: rgba(255,255,255,0.72);
    }
    .slot .big{ font-size: 34px; }
    .slot .small{ margin-top: 6px; }

    /* ä¾‹ãˆæ–‡ï¼ˆæœãƒ»æ˜¼ãƒ»å¤œï¼‰ */
    #meta_m, #meta_d, #meta_e{
      margin-top: 8px;
      font-size: 16px;
      color: #1f2937;
      line-height: 1.65;
      font-weight: 500;
    }

    /* äººé–“å‘ã‘ç¿»è¨³ */
    #metaphor{
      margin-top: 8px;
      font-size: 24px;
      line-height: 1.7;
      font-weight: 800;
      letter-spacing: -0.2px;
    }

    /* è¿½åŠ ãƒã‚¿ä¸€è¦§ */
    .listItem{
      border: 1px solid rgba(15,23,42,0.08);
      border-radius: 14px;
      padding: 10px 12px;
      margin: 8px 0;
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items: center;
      background: rgba(255,255,255,0.75);
    }
    .listText{ color:#0f172a; line-height:1.5; }
    .listMeta{ color:#64748b; font-size:12px; margin-top:4px; }
    .btnSmall{
      min-height: 36px;
      padding: 8px 10px;
      border-radius: 12px;
      font-size: 13px;
    }

    /* ä¸‹ã®å›ºå®šçš„ãªæ“ä½œã‚¨ãƒªã‚¢ */
    .actions{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      margin-top: 12px;
    }

    /* Footer */
    .footer{
      margin: 18px 0 8px;
      color: var(--sub);
      font-size: 12px;
      text-align: center;
      opacity: 0.9;
    }

    /* âœ… ã‚¹ãƒãƒ›æœ€é©åŒ– */
    @media (max-width: 600px){
      body{ padding: 12px; }
      h1{ font-size: 22px; }
      .subtitle{ font-size: 13px; }
      .card{ padding: 12px; }
      .row{ grid-template-columns: 1fr; }
      #metaphor{ font-size: 20px; }
      #meta_m, #meta_d, #meta_e{ font-size: 15px; }
      .pill{ font-size: 11px; padding: 5px 8px; }
      .listItem{ grid-template-columns: 1fr; }
    }
    /* ä¾‹ãˆãƒ¢ãƒ¼ãƒ‰ï¼ˆé›‘å­¦ãƒ»ãŠç¬‘ã„ï¼‰ã®ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ä½ç½®èª¿æ•´ */
.example-mode label {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
}

.example-mode input[type="radio"] {
  transform: translateY(1px); /* iPhone/Safariå¯¾ç­– */
}

  </style>
</head>

<body>
  <div class="container">

    <h1>ã€ŒãŸã¨ãˆã¦ã€é™æ°´ç¢ºç‡ã€
      <div class="subtitle">ï¼é™æ°´ç¢ºç‡ã‚’â€œåˆ¥ã®ç¢ºç‡â€ã§ä¾‹ãˆã¦ã¿ãŸã€‚</div>
    </h1>

    <div class="card">
      <div class="small">å¤©æ°—äºˆå ±ã‚’çŸ¥ã‚ŠãŸã„åœ°ç‚¹</div>
      <div class="row" style="margin-top:10px;">
        <input id="place" placeholder="ä¾‹ï¼šä»™å°å¸‚ / Sendai / ä»™å°é§… / ä»™å°å¸‚é’è‘‰åŒº" />
        <!-- âœ… æ¤œç´¢ãƒœã‚¿ãƒ³ã‚’ãƒ—ãƒ­ã£ã½ã -->
        <button id="search" class="btnPrimary">æ¤œç´¢</button>
      </div>

      <div style="margin-top:10px;">
        <select id="candidates" disabled>
          <option>æ¤œç´¢çµæœãŒã“ã“ã«å‡ºã¾ã™</option>
        </select>
        <div id="placeStatus" class="muted" style="margin-top:8px;">
          åœ°ç‚¹ã‚’å…¥åŠ›ã—ã¦ã€Œæ¤œç´¢ã€ã—ã¦ãã ã•ã„ï¼ˆAPIã‚­ãƒ¼ä¸è¦ï¼‰
        </div>
      </div>
    </div>

    <div class="card">
      <div class="small">ä¾‹ãˆãƒ¢ãƒ¼ãƒ‰ï¼ˆâ€»Aç‰ˆã¯çµ±åˆè¡¨ç¤ºï¼‰</div>
      <div style="margin-top:10px;">
        <label><input type="radio" name="mode" value="trivia" checked> é›‘å­¦</label>
        <label style="margin-left:10px;"><input type="radio" name="mode" value="fun"> ãŠç¬‘ã„</label>
      </div>
      <div class="muted" style="margin-top:10px;">
        â€»åŒã˜ç¢ºç‡ã§ã‚‚ã€æ¯å›ã¡ãŒã†ãƒã‚¿ãŒå‡ºã¾ã™ï¼ˆğŸ‘ã§å‡ºã‚„ã™ããªã‚Šã¾ã™ï¼‰
      </div>
    </div>

    <div class="card">
      <div class="small">ä»Šæ—¥ã®é™æ°´ç¢ºç‡ï¼ˆæœ/æ˜¼/å¤œï¼‰</div>
      <div class="small" id="popHint">åœ°ç‚¹ã‚’é¸ã¶ã¨è‡ªå‹•å–å¾—ã—ã¾ã™</div>

      <!-- æœ -->
      <div class="slot">
        <div class="small">æœï¼ˆ6â€“11æ™‚ï¼‰</div>
        <div class="big">
          <span id="wx_m" style="margin-right:8px;">--</span>
          <span id="pop_m">--%</span>
        </div>
        <div class="small" id="meta_m"></div>

        <div class="actions">
          <button id="del_m" style="display:none;">ã“ã®ãƒã‚¿ã‚’å‰Šé™¤</button>

          <button id="like_m">ğŸ‘ã„ã„ã­ (<span id="likeCount_m">0</span>)</button>
          <span id="badge_m" style="margin-left:6px;font-size:20px;"></span>
        </div>
      </div>

      <!-- æ˜¼ -->
      <div class="slot">
        <div class="small">æ˜¼ï¼ˆ12â€“17æ™‚ï¼‰</div>
        <div class="big">
          <span id="wx_d" style="margin-right:8px;">--</span>
          <span id="pop_d">--%</span>
        </div>
        <div class="small" id="meta_d"></div>

        <div class="actions">
          <button id="del_d" style="display:none;">ã“ã®ãƒã‚¿ã‚’å‰Šé™¤</button>

          <button id="like_d">ğŸ‘ã„ã„ã­ (<span id="likeCount_d">0</span>)</button>
          <span id="badge_d" style="margin-left:6px;font-size:20px;"></span>
        </div>
      </div>

      <!-- å¤œ -->
      <div class="slot">
        <div class="small">å¤œï¼ˆ18â€“23æ™‚ï¼‰</div>
        <div class="big">
          <span id="wx_e" style="margin-right:8px;">--</span>
          <span id="pop_e">--%</span>
        </div>
        <div class="small" id="meta_e"></div>

        <div class="actions">
          <button id="del_e" style="display:none;">ã“ã®ãƒã‚¿ã‚’å‰Šé™¤</button>

          <button id="like_e">ğŸ‘ã„ã„ã­ (<span id="likeCount_e">0</span>)</button>
          <span id="badge_e" style="margin-left:6px;font-size:20px;"></span>
        </div>
      </div>

      <div style="margin-top:12px;">
        <span class="pill" id="sourceTag">API: æœªæ¥ç¶š</span>
        <span class="pill" id="tzTag">TZ: --</span>
      </div>
    </div>

    <div class="card">
      <div class="small">äººé–“å‘ã‘ç¿»è¨³ï¼ˆæ¯å›ãƒ©ãƒ³ãƒ€ãƒ ï¼‰</div>
      <div class="big" id="metaphor">åœ°ç‚¹ã‚’é¸ã‚“ã§ãã ã•ã„</div>
      <div class="muted" id="metaFoot" style="margin-top:10px;"></div>

      <div class="actions">
        <!-- âœ… â€œæ›´æ–°â€ã‚‚ä¸»ãƒœã‚¿ãƒ³ã¸ -->
        <button id="refresh" class="btnPrimary">åŒã˜ç¢ºç‡ã§ã‚‚ä¾‹ãˆã‚’å¤‰ãˆã‚‹</button>
      </div>
    </div>

    <!-- âœ… ãƒã‚¿è¿½åŠ ï¼ˆä¿å­˜ï¼‰ -->
    <div class="card" id="addSection">
      <div class="small"><b>ãƒã‚¿è¿½åŠ ï¼ˆã“ã®ç«¯æœ«ã«ä¿å­˜ï¼‰</b></div>

      <div class="actions" style="margin-top:10px;">
        <label class="small">ãƒ¢ãƒ¼ãƒ‰ï¼š</label>
        <select id="newPhraseMode" style="max-width: 220px;">
          <option value="trivia">é›‘å­¦</option>
          <option value="fun">ãŠç¬‘ã„</option>
        </select>

        <label class="small">ç¢ºç‡ï¼š</label>
        <select id="newPhraseBucket" style="max-width: 140px;">
          <option value="0">0%</option>
          <option value="10">10%</option>
          <option value="20">20%</option>
          <option value="30">30%</option>
          <option value="40">40%</option>
          <option value="50">50%</option>
          <option value="60">60%</option>
          <option value="70">70%</option>
          <option value="80">80%</option>
          <option value="90">90%</option>
          <option value="100">100%</option>
        </select>

        <button id="addPhraseBtn" class="btnPrimary">è¿½åŠ </button>
      </div>

      <div style="margin-top:10px;">
        <textarea id="newPhrase" rows="3" placeholder="ä¾‹ï¼šæ—¥æœ¬ã®è­˜å­—ç‡ã¯99ï¼…ï¼ˆç´„100ï¼…ï¼‰"></textarea>
      </div>

      <div class="muted" id="addStatus" style="margin-top:10px;"></div>

      <!-- âœ… é–‹é–‰ãƒœã‚¿ãƒ³ -->
      <div class="actions" style="margin-top:12px;">
        <button id="toggleExtraList">è¿½åŠ ãƒã‚¿ä¸€è¦§ã‚’é–‹ã â–¼</button>
        <div class="muted" style="margin-top:0;">
          â€»ã“ã®ä¸€è¦§ã¯ã€Œã“ã®ç«¯æœ«ï¼ˆã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ï¼‰ã€ã ã‘ã«ä¿å­˜ã•ã‚ŒãŸè¿½åŠ ãƒã‚¿ã§ã™
        </div>
      </div>

      <!-- âœ… é–‹é–‰å¯¾è±¡ -->
      <div id="extraListPanel" style="display:none; margin-top:12px;">
        <div class="small"><b>è¿½åŠ ãƒã‚¿ä¸€è¦§ï¼ˆã“ã®ç«¯æœ«ï¼‰</b></div>

        <div class="actions" style="margin-top:10px;">
          <label class="small">ãƒ¢ãƒ¼ãƒ‰ï¼š</label>
          <select id="listMode" style="max-width: 220px;">
            <option value="trivia">é›‘å­¦</option>
            <option value="fun">ãŠç¬‘ã„</option>
          </select>

          <label class="small">ç¢ºç‡ï¼š</label>
          <select id="listBucket" style="max-width: 140px;">
            <option value="0">0%</option>
            <option value="10">10%</option>
            <option value="20">20%</option>
            <option value="30">30%</option>
            <option value="40">40%</option>
            <option value="50">50%</option>
            <option value="60">60%</option>
            <option value="70">70%</option>
            <option value="80">80%</option>
            <option value="90">90%</option>
            <option value="100">100%</option>
          </select>
        </div>

        <div class="muted" id="listStatus" style="margin-top:10px;"></div>
        <div id="listBody" style="margin-top:10px;"></div>
      </div>
    </div>

    <div class="footer">
      API: Open-Meteo / PWAå¯¾å¿œï¼ˆãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ OKï¼‰
    </div>

  </div><!-- /.container -->

  <!-- å¤–éƒ¨ãƒã‚¿ -->
  <script src="metaphors.js?v=4"></script>
  <script defer src="script.js?v=4"></script>

</body>
</html>

